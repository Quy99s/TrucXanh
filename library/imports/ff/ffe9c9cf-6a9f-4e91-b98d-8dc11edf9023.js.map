{"version":3,"sources":["../../../../assets/trucxanh/assets/trucxanh/Game.js"],"names":["cc","Class","extends","Component","properties","scoreLabel","Label","winGamePanel","Node","loseGamePanel","tableGame","score","startButton","onLoad","totalScore","active","node","on","updateScore","winGame","restart","hiddenWinGamePanel","showScore","playGame","setNewGame","ev","isUpdateScore","isCorrect","getUserData","newScore","tween","to","easing","call","start","checkLose","stopPropagation","showWinGamePanel","soundControl","playMusicAudio","hiddenLoseGamePanel","stopMusicAudio","emit","string","Math","round","update"],"mappings":"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","file":"Game.js","sourceRoot":"../../../../assets/trucxanh","sourcesContent":["\n\ncc.Class({\n    extends: cc.Component,\n\n    properties: {\n        scoreLabel: cc.Label,\n        winGamePanel: cc.Node,\n        loseGamePanel: cc.Node,\n        tableGame: cc.Node,\n        score: 0,\n        startButton: cc.Node,\n    },\n\n    onLoad() {\n\n        //window.item = this;\n        this.totalScore = this.score;\n        this.tableGame.active = false;\n        this.node.on(\"UPDATE_SCORE\", this.updateScore, this);\n        this.node.on(\"GAME_WIN\", this.winGame, this);\n        this.node.on(\"GAME_RESTART\", this.restart, this);\n        this.hiddenWinGamePanel();\n        this.showScore();\n\n    },\n    playGame() {\n        this.startButton.active = false;\n        this.setNewGame();\n    },\n\n    updateScore(ev) {\n        this.isUpdateScore = true;\n        const isCorrect = ev.getUserData().isCorrect;\n        if (isCorrect) {\n            this.newScore = this.totalScore + 10;\n        } else {\n            this.newScore = this.totalScore - 10;\n        }\n        cc.tween(this)\n            .to(1, { totalScore: this.newScore }, { easing: \"sineInOut\" })\n            .call(() => {\n                this.isUpdateScore = false;\n            })\n            .start();\n        this.checkLose();\n        ev.stopPropagation();\n\n    },\n\n\n    winGame(ev) {\n        ev.stopPropagation();\n        this.showWinGamePanel();\n        this.node.soundControl && this.node.soundControl.playMusicAudio();\n    },\n    showWinGamePanel() {\n        this.tableGame.active = false;\n        this.winGamePanel.active = true;\n\n    },\n    hiddenWinGamePanel() {\n        this.winGamePanel.active = false;\n    },\n    hiddenLoseGamePanel() {\n        this.loseGamePanel.active = false;\n    },\n    setNewGame() {\n        this.node.soundControl && this.node.soundControl.stopMusicAudio();\n        this.totalScore = this.score;\n        this.tableGame.active = true;\n        this.hiddenWinGamePanel();\n        this.hiddenLoseGamePanel();\n        this.tableGame.emit(\"RESET_TABLE\");\n        this.showScore();\n        this.node.soundControl && this.node.soundControl.playMusicAudio();\n    },\n    restart(ev) {\n        ev.stopPropagation();\n        this.totalScore = this.score;\n        this.tableGame.active = true;\n        // todo\n        // reset table\n        // reset score\n        // reset effect win\n        this.setNewGame();\n    },\n    showScore() {\n        this.scoreLabel.string = 'Score: ' + Math.round(this.totalScore);\n    },\n    checkLose() {\n        if (this.newScore == 0) {\n            this.tableGame.active = false;\n            this.loseGamePanel.active = true;\n            this.node.soundControl && this.node.soundControl.playMusicAudio();\n        }\n    },\n    update() {\n        if (this.isUpdateScore) this.showScore();\n    },\n\n});\n"]}